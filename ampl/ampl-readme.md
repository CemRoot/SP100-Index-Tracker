# AMPL Implementation Instructions

This directory contains the AMPL model files for the S&P 100 index tracking optimization.

## Files

- `index_fund.mod` - AMPL model file with the mathematical formulation
- `index_fund.run` - AMPL run commands to execute the optimization
- `index_fund.dat` - Data file (generated by Python script)

## AMPL Setup

1. **Install AMPL**:
   - Academic licenses can be obtained from [AMPL's website](https://ampl.com/try-ampl/download-a-free-demo/)
   - Commercial licenses are available for purchase
   - Cloud-based options include [NEOS Server](https://neos-server.org/neos/) or [AMPL for Academics](https://ampl.com/products/ampl-for-academics/)

2. **Install a Solver**:
   - Recommended: CPLEX, Gurobi, or CBC
   - Free alternatives: CBC, GLPK
   - AMPL demo includes some solvers with limitations

3. **Set Up Environment**:
   - Ensure AMPL executable is in your PATH
   - Set appropriate solver in the run file (`option solver cplex;` or similar)

## Running the Model

1. Generate the data file:
   ```bash
   python ../src/2_ampl_data_preparation.py
   ```

2. Run AMPL with the run file:
   ```bash
   ampl index_fund.run
   ```

3. Alternative: Interactive AMPL session:
   ```bash
   ampl
   model index_fund.mod;
   data index_fund.dat;
   option solver cplex;  # or another solver
   solve;
   display x, w;  # display results
   ```

## Understanding the Results

The AMPL run file will:
1. Solve the optimization problem for different values of q (number of stocks)
2. Output results to CSV files
3. Create portfolio compositions with selected stocks and weights
4. Generate tracking error statistics

Results are saved to:
- `tracking_error_results.csv` - Tracking error for each q value
- `portfolio_results.csv` - Portfolio compositions for each q value

## Troubleshooting

- **Solver not found**: Check that your solver is properly installed and set in the run file
- **Memory issues**: For large problems, increase memory limit (`option mem_limit X;` where X is in MB)
- **Data file issues**: Ensure the Python script generated the data file correctly

## References

- [AMPL Documentation](https://ampl.com/resources/the-ampl-book/)
- [AMPL API](https://ampl.com/api/)
